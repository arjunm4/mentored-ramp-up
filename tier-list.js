// Album track data
const albumData = {
    beatopia: {
        title: "Beatopia",
        tracks: [
            "Beatopia Cultsong",
            "10:36",
            "Sunny Day",
            "See you Soon",
            "Ripples",
            "the perfect pair",
            "broken cd",
            "Talk",
            "Lovesong",
            "Pictures of Us",
            "fairy song",
            "Don't Get the Deal",
            "Tinkerbell is Overrated",
            "You're Here That's the Thing"
        ]
    },
    bewitched: {
        title: "Bewitched",
        tracks: [
            "Dreamer",
            "Second Best",
            "Haunted",
            "Must Be Love",
            "While You Were Sleeping",
            "Lovesick",
            "Valentine",
            "Like the Movies",
            "Misty",
            "Let You Break My Heart Again",
            "I Wish You Love",
            "California and Me",
            "From the Start",
            "Letter to My 13 Year Old Self"
        ]
    },
    born_to_die: {
        title: "Born to Die",
        tracks: [
            "Born to Die",
            "Off to the Races",
            "Blue Jeans",
            "Video Games",
            "Diet Mountain Dew",
            "National Anthem",
            "Dark Paradise",
            "Radio",
            "Carmen",
            "Million Dollar Man",
            "Summertime Sadness",
            "This Is What Makes Us Girls"
        ]
    },
    certified_lover_boy: {
        title: "Certified Lover Boy",
        tracks: [
            "Champagne Poetry",
            "Papi's Home",
            "Girls Want Girls",
            "In The Bible",
            "Love All",
            "Fair Trade",
            "Way 2 Sexy",
            "TSU",
            "N 2 Deep",
            "Pipe Down",
            "Yebba's Heartbreak",
            "No Friends in the Industry",
            "Knife Talk",
            "7AM on the Bridle Path",
            "Race My Mind",
            "Fountains",
            "Get Along Better",
            "You Only Live Twice",
            "IMY2",
            "Love You Better",
            "The Remorse"
        ]
    },
    charm: {
        title: "Charm",
        tracks: [
            "Nomad",
            "Sexy to Someone",
            "Second Nature",
            "Slow Dance",
            "Thank You",
            "Terrapin",
            "Juna",
            "Add Up My Love",
            "Echo",
            "Glory of the Snow",
            "Pier 4"
        ]
    },
    die_lit: {
        title: "Die Lit",
        tracks: [
            "Long Time (Intro)",
            "R.I.P.",
            "Lean 4 Real",
            "Old Money",
            "Love Hurts",
            "Shoota",
            "Right Now",
            "Poke It Out",
            "Home (KOD)",
            "Fell in Luv",
            "Foreign",
            "Pull Up",
            "Mileage",
            "FlatBed Freestyle",
            "No Time",
            "Middle of the Summer",
            "Choppa Won't Miss",
            "R.I.P. Fredo",
            "Top"
        ]
    },
    french_exit: {
        title: "French Exit",
        tracks: [
            "Pantyhose",
            "Birds Don't Sing",
            "Louise",
            "Hate Yourself",
            "The Getaway",
            "Talk to Strangers",
            "The Blonde",
            "Daughter of a Cop",
            "Lovers Rock",
            "Her and Her Friend",
            "Come When You Call",
            "Anjela"
        ]
    },
    freudian: {
        title: "Freudian",
        tracks: [
            "Get You (Ft. Kali Uchis)",
            "Best Part (Ft. H.E.R.)",
            "Hold Me Down",
            "Neu Roses (Transgressor's Song)",
            "Loose",
            "We Find Love",
            "Blessed",
            "Take Me Away (Ft. Syd)",
            "Transform (Ft. Charlotte Day Wilson)",
            "Freudian"
        ]
    },
    graduation: {
        title: "Graduation",
        tracks: [
            "Good Morning",
            "Champion",
            "Stronger",
            "I Wonder",
            "Good Life (Ft. T-Pain)",
            "Can't Tell Me Nothing",
            "Barry Bonds (Ft. Lil Wayne)",
            "Drunk and Hot Girls (Ft. Yasiin Bey)",
            "Flashing Lights (Ft. Dwele)",
            "Everything I Am (Ft. DJ Premier)",
            "The Glory",
            "Homecoming (Ft. Chris Martin)",
            "Big Brother",
            "Good Night (Ft. Al Be Back & Yasiin Bey)",
            "Bittersweet Poetry (Ft. John Mayer)"
        ]
    },
    house_of_balloons: {
        title: "House of Balloons",
        tracks: [
            "High for This",
            "What You Need",
            "House of Balloons / Glass Table Girls",
            "The Morning",
            "Wicked Games",
            "The Party & The After Party",
            "Coming Down",
            "Loft Music",
            "The Knowing"
        ]
    },
    
    in_rainbows: {
        title: "In Rainbows",
        tracks: [
            "15 Step",
            "Bodysnatchers",
            "Nude",
            "Weird Fishes/Arpeggi",
            "All I Need",
            "Faust Arp",
            "Reckoner",
            "House of Cards",
            "Jigsaw Falling into Place",
            "Videotape"
        ]
    },
    
    norman_rockwell: {
        title: "Norman Fucking Rockwell!",
        tracks: [
            "Norman fucking Rockwell",
            "Mariners Apartment Complex",
            "Venice Bitch",
            "Fuck It I Love You",
            "Doin’ Time",
            "Love Song",
            "Cinnamon Girl",
            "How to Disappear",
            "California",
            "The Next Best American Record",
            "The greatest",
            "Bartender",
            "Happiness Is a Butterfly",
            "hope is a dangerous thing for a woman like me to have - but I have it"
        ]
    },
    
    rodeo: {
        title: "Rodeo",
        tracks: [
            "Pornography",
            "Oh My Dis Side",
            "3500",
            "Wasted",
            "90210",
            "Pray 4 Love",
            "Nightcrawler",
            "Piss on Your Grave",
            "Antidote",
            "Impossible",
            "Maria I’m Drunk",
            "Flying High",
            "I Can Tell",
            "Apple Pie",
            "Ok Alright",
            "Never Catch Me"
        ]
    },
    
    self_titled: {
        title: "Playboi Carti",
        tracks: [
            "Location",
            "Magnolia",
            "Lookin",
            "Wokeuplikethis*",
            "Let It Go",
            "Half & Half",
            "New Choppa",
            "Other Shit",
            "No. 9",
            "Dothatshit!",
            "Lame Niggaz",
            "Yah Mean",
            "Flex",
            "Kelly K",
            "Had 2"
        ]
    },
    take_care: {
        title: "Take Care",
        tracks: [
            "Over My Dead Body",
            "Shot For Me",
            "Headlines",
            "Crew Love",
            "Take Care",
            "Marvins Room",
            "Buried Alive Interlude",
            "Under Ground Kings",
            "We'll Be Fine",
            "Make Me Proud",
            "Lord Knows",
            "Cameras / Good Ones Go Interlude - Medley",
            "Doing It Wrong",
            "The Real Her",
            "Look What You've Done",
            "HYFR (Hell Ya Fucking Right)",
            "Practice",
            "The Ride",
            "The Motto"
        ]
    },
    whole_lotta_red: {
        title: "Whole Lotta Red",
        tracks: [
            "Rockstar Made",
            "Go2DaMoon",
            "Stop Breathing",
            "Beno!",
            "JumpOutTheHouse",
            "M3tamorphosis",
            "Slay3r",
            "No Sl33p",
            "New Tank",
            "Teen X",
            "Meh",
            "Vamp Anthem",
            "New N3on",
            "Control",
            "Punk Monk",
            "On That Time",
            "King Vamp",
            "Place",
            "Sky",
            "Over",
            "ILoveUIHateU",
            "Die4Guy",
            "NotPLaying",
            "F33l Lik3 Dyin"
        ]
    }

    // Add more albums here as needed
};

// Get album from URL parameter
function getAlbumFromURL() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('album');
}

// Initialize the tier list
document.addEventListener('DOMContentLoaded', function() {
    const album = getAlbumFromURL();
    
    if (!album || !albumData[album]) {
        // If no valid album, redirect to home
        window.location.href = 'index.html';
        return;
    }
    
    const albumInfo = albumData[album];
    
    // Update page title
    document.getElementById('albumTitle').textContent = `${albumInfo.title} - Tier List`;
    document.title = `${albumInfo.title} Tier List`;
    
    // Load tracks into the pool
    loadTracks(albumInfo.tracks);
});

// Load tracks into the track pool
function loadTracks(tracks) {
    const trackPool = document.getElementById('trackPool');
    trackPool.innerHTML = '';
    
    tracks.forEach(track => {
        const trackElement = createTrackElement(track);
        trackPool.appendChild(trackElement);
    });
}

// Create a draggable track element
function createTrackElement(trackName) {
    const trackElement = document.createElement('div');
    trackElement.className = 'track-item';
    trackElement.draggable = true;
    trackElement.textContent = trackName;
    trackElement.id = `track-${trackName.replace(/\s+/g, '-').toLowerCase()}`;
    
    trackElement.addEventListener('dragstart', handleDragStart);
    trackElement.addEventListener('dragend', handleDragEnd);
    
    return trackElement;
}

// Drag and drop event handlers
function handleDragStart(e) {
    e.dataTransfer.setData('text/plain', e.target.id);
    e.target.classList.add('dragging');
}

function handleDragEnd(e) {
    e.target.classList.remove('dragging');
}

function allowDrop(e) {
    e.preventDefault();
    e.currentTarget.classList.add('drag-over');
}

function drop(e) {
    e.preventDefault();
    e.currentTarget.classList.remove('drag-over');
    
    const trackId = e.dataTransfer.getData('text/plain');
    const trackElement = document.getElementById(trackId);
    
    if (trackElement && e.currentTarget.classList.contains('tier-content')) {
        // Remove from current location
        trackElement.remove();
        
        // Add to new tier
        e.currentTarget.appendChild(trackElement);
        
        // Add visual feedback
        trackElement.style.transform = 'scale(1.1)';
        setTimeout(() => {
            trackElement.style.transform = '';
        }, 200);
    }
}

// Remove drag-over class when leaving drop zone
document.addEventListener('dragleave', function(e) {
    if (e.target.classList.contains('tier-content')) {
        e.target.classList.remove('drag-over');
    }
});

// Back button functionality
function goBack() {
    window.location.href = 'index.html';
}

// Keyboard navigation support
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        goBack();
    }
});

// Add some visual feedback for successful drops
function showDropFeedback(element) {
    element.style.background = '#2a2a2a';
    setTimeout(() => {
        element.style.background = '';
    }, 300);
}
